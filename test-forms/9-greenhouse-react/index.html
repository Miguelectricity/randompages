<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Application for Sr. Electrical Design Engineer at Industrial Electric Manufacturing</title>
  <link rel="stylesheet" href="../styles.css">

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    :root {
      --gh-primary: #00857c;
      --gh-primary-hover: #006b64;
      --gh-text: #2d3748;
      --gh-text-muted: #718096;
      --gh-border: #e2e8f0;
      --gh-bg: #fff;
      --gh-bg-muted: #f7fafc;
      --gh-bg-hover: #edf2f7;
      --gh-error: #e53e3e;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--gh-bg-muted);
      margin: 0;
      padding: 0;
      color: var(--gh-text);
      line-height: 1.5;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    .header-banner {
      background: var(--gh-bg);
      padding: 24px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      color: var(--gh-text-muted);
      font-size: 14px;
      text-decoration: none;
      margin-bottom: 16px;
    }

    .back-link:hover {
      color: var(--gh-text);
    }

    .back-link svg {
      margin-right: 8px;
    }

    .job-info h1 {
      font-size: 28px;
      font-weight: 600;
      margin: 0 0 8px 0;
    }

    .job-location {
      color: var(--gh-text-muted);
      font-size: 16px;
    }

    .new-badge {
      display: inline-block;
      background: #e6fffa;
      color: var(--gh-primary);
      font-size: 12px;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: 12px;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    .main-content {
      display: grid;
      grid-template-columns: 1fr 380px;
      gap: 24px;
    }

    @media (max-width: 768px) {
      .main-content {
        grid-template-columns: 1fr;
      }
    }

    .job-description {
      background: var(--gh-bg);
      padding: 32px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .job-description h2 {
      font-size: 20px;
      font-weight: 600;
      margin: 0 0 16px 0;
    }

    .job-description h3 {
      font-size: 16px;
      font-weight: 600;
      margin: 24px 0 12px 0;
    }

    .job-description ul {
      margin: 0 0 16px 0;
      padding-left: 20px;
    }

    .job-description li {
      margin-bottom: 8px;
    }

    .application-panel {
      background: var(--gh-bg);
      padding: 24px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 20px;
      max-height: calc(100vh - 40px);
      overflow-y: auto;
    }

    .application-panel h2 {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 20px 0;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-group label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 6px;
    }

    .form-group label .required {
      color: var(--gh-error);
    }

    .form-group input[type="text"],
    .form-group input[type="email"],
    .form-group input[type="tel"],
    .form-group input[type="url"],
    .form-group textarea {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--gh-border);
      border-radius: 6px;
      font-size: 14px;
      color: var(--gh-text);
      background: var(--gh-bg);
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--gh-primary);
      box-shadow: 0 0 0 3px rgba(0, 133, 124, 0.1);
    }

    .form-group textarea {
      min-height: 100px;
      resize: vertical;
    }

    .css-2b097c-container {
      position: relative;
    }

    .css-yk16xz-control {
      display: flex;
      align-items: center;
      justify-content: space-between;
      min-height: 42px;
      padding: 2px 12px;
      border: 1px solid var(--gh-border);
      border-radius: 6px;
      background: var(--gh-bg);
      cursor: pointer;
      transition: all 0.2s;
    }

    .css-yk16xz-control:hover {
      border-color: var(--gh-text-muted);
    }

    .css-yk16xz-control--focused {
      border-color: var(--gh-primary);
      box-shadow: 0 0 0 3px rgba(0, 133, 124, 0.1);
    }

    .css-yk16xz-control--error {
      border-color: var(--gh-error);
    }

    .css-1wa3eu0-placeholder {
      color: var(--gh-text-muted);
      font-size: 14px;
    }

    .css-1uccc91-singleValue {
      color: var(--gh-text);
      font-size: 14px;
    }

    .css-1okebmr-indicatorSeparator {
      display: none;
    }

    .css-tlfecz-indicatorContainer {
      color: var(--gh-text-muted);
      padding: 8px;
      transition: transform 0.2s;
    }

    .css-tlfecz-indicatorContainer--open {
      transform: rotate(180deg);
    }

    .css-input-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }

    .css-26l3qy-menu {
      position: absolute;
      z-index: 9999;
      background: var(--gh-bg);
      border: 1px solid var(--gh-border);
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      margin-top: 4px;
      overflow: hidden;
    }

    .css-4ljt47-MenuList {
      max-height: 250px;
      overflow-y: auto;
      padding: 4px 0;
    }

    .css-1n7v3ny-option {
      padding: 10px 12px;
      font-size: 14px;
      color: var(--gh-text);
      cursor: pointer;
      transition: background 0.1s;
    }

    .css-1n7v3ny-option:hover {
      background: var(--gh-bg-hover);
    }

    .css-1n7v3ny-option--selected {
      background: rgba(0, 133, 124, 0.1);
      color: var(--gh-primary);
    }

    .css-1n7v3ny-option--focused {
      background: var(--gh-bg-hover);
    }

    .css-loading-indicator {
      padding: 12px;
      text-align: center;
      color: var(--gh-text-muted);
      font-size: 14px;
    }

    .phone-group {
      display: flex;
      gap: 8px;
    }

    .phone-group .country-select {
      width: 160px;
      flex-shrink: 0;
    }

    .phone-group input[type="tel"] {
      flex: 1;
    }

    .file-upload-group {
      margin-bottom: 16px;
    }

    .file-upload-group label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 6px;
    }

    .file-upload-options {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    .file-upload-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: var(--gh-bg);
      border: 1px solid var(--gh-border);
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
    }

    .file-upload-btn:hover {
      background: var(--gh-bg-muted);
      border-color: var(--gh-primary);
    }

    .file-upload-btn input[type="file"] {
      display: none;
    }

    .file-upload-help {
      font-size: 12px;
      color: var(--gh-text-muted);
    }

    .divider {
      height: 1px;
      background: var(--gh-border);
      margin: 24px 0;
    }

    .section-header {
      font-size: 14px;
      font-weight: 600;
      color: var(--gh-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
    }

    .submit-btn {
      width: 100%;
      padding: 14px 24px;
      background: var(--gh-primary);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }

    .submit-btn:hover {
      background: var(--gh-primary-hover);
    }

    .powered-by {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid var(--gh-border);
      font-size: 12px;
      color: var(--gh-text-muted);
    }

    .powered-by .gh-logo {
      font-weight: 600;
      color: var(--gh-text);
    }

    .footer {
      text-align: center;
      padding: 24px;
      color: var(--gh-text-muted);
      font-size: 12px;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header-banner">
      <a href="../index.html" class="back-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7" />
        </svg>
        Back to jobs
      </a>
      <div class="job-info">
        <span class="new-badge">New</span>
        <h1>Sr. Electrical Design Engineer</h1>
        <p class="job-location">Remote - US</p>
      </div>
    </div>

    <div class="main-content">
      <div class="job-description">
        <h2>About IEM</h2>
        <p>Industrial Electric Mfg. (IEM) is the largest independent full-line manufacturer of custom power distribution
          systems in North America.</p>

        <h3>Position Summary</h3>
        <p>The Senior Electrical Design Engineer is responsible for the design of low and medium voltage power systems.</p>

        <h3>Key Responsibilities</h3>
        <ul>
          <li>Create bill of material and drawing packages for complex equipment</li>
          <li>Serve as primary technical point of contact during manufacturing</li>
          <li>Lead coordination with mechanical designers</li>
          <li>Mentor junior engineers</li>
        </ul>

        <h3>Qualifications</h3>
        <ul>
          <li>Bachelor's degree in Electrical Engineering</li>
          <li>Minimum 5 years of experience</li>
          <li>Industrial automation experience is a plus</li>
        </ul>

        <h3>Compensation</h3>
        <p>$115,200 - $174,720 per year</p>
      </div>

      <div id="application-root"></div>
    </div>

    <div class="footer">
      <p>&copy; 2024 Industrial Electric Manufacturing</p>
    </div>
  </div>

  <div id="select-portal-root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;
    const { createPortal } = ReactDOM;

    const DROPDOWN_OPTIONS_API = {
      phone_country: [
        { value: 'US', label: 'United States (+1)' },
        { value: 'CA', label: 'Canada (+1)' },
        { value: 'UK', label: 'United Kingdom (+44)' },
        { value: 'AU', label: 'Australia (+61)' },
        { value: 'DE', label: 'Germany (+49)' },
        { value: 'FR', label: 'France (+33)' },
        { value: 'IN', label: 'India (+91)' },
        { value: 'MX', label: 'Mexico (+52)' },
        { value: 'JP', label: 'Japan (+81)' },
        { value: 'BR', label: 'Brazil (+55)' },
        { value: 'AF', label: 'Afghanistan (+93)' },
        { value: 'AL', label: 'Albania (+355)' },
        { value: 'DZ', label: 'Algeria (+213)' },
        { value: 'AD', label: 'Andorra (+376)' },
        { value: 'AO', label: 'Angola (+244)' },
        { value: 'AG', label: 'Antigua and Barbuda (+1-268)' },
        { value: 'AR', label: 'Argentina (+54)' },
        { value: 'AM', label: 'Armenia (+374)' },
        { value: 'AT', label: 'Austria (+43)' },
        { value: 'AZ', label: 'Azerbaijan (+994)' },
        { value: 'BS', label: 'Bahamas (+1-242)' },
        { value: 'BH', label: 'Bahrain (+973)' },
        { value: 'BD', label: 'Bangladesh (+880)' },
        { value: 'BB', label: 'Barbados (+1-246)' },
        { value: 'BY', label: 'Belarus (+375)' },
        { value: 'BE', label: 'Belgium (+32)' },
        { value: 'BZ', label: 'Belize (+501)' },
        { value: 'BJ', label: 'Benin (+229)' },
        { value: 'BT', label: 'Bhutan (+975)' },
        { value: 'BO', label: 'Bolivia (+591)' },
        { value: 'BA', label: 'Bosnia and Herzegovina (+387)' },
        { value: 'BW', label: 'Botswana (+267)' },
        { value: 'BN', label: 'Brunei (+673)' },
        { value: 'BG', label: 'Bulgaria (+359)' },
        { value: 'BF', label: 'Burkina Faso (+226)' },
        { value: 'BI', label: 'Burundi (+257)' },
        { value: 'KH', label: 'Cambodia (+855)' },
        { value: 'CM', label: 'Cameroon (+237)' },
        { value: 'CV', label: 'Cape Verde (+238)' },
        { value: 'CF', label: 'Central African Republic (+236)' },
        { value: 'TD', label: 'Chad (+235)' },
        { value: 'CL', label: 'Chile (+56)' },
        { value: 'CN', label: 'China (+86)' },
        { value: 'CO', label: 'Colombia (+57)' },
        { value: 'KM', label: 'Comoros (+269)' },
        { value: 'CG', label: 'Congo (+242)' },
        { value: 'CR', label: 'Costa Rica (+506)' },
        { value: 'HR', label: 'Croatia (+385)' },
        { value: 'CU', label: 'Cuba (+53)' },
        { value: 'CY', label: 'Cyprus (+357)' },
        { value: 'CZ', label: 'Czech Republic (+420)' },
        { value: 'DK', label: 'Denmark (+45)' },
        { value: 'DJ', label: 'Djibouti (+253)' },
        { value: 'DM', label: 'Dominica (+1-767)' },
        { value: 'DO', label: 'Dominican Republic (+1-809)' },
        { value: 'EC', label: 'Ecuador (+593)' },
        { value: 'EG', label: 'Egypt (+20)' },
        { value: 'SV', label: 'El Salvador (+503)' },
        { value: 'GQ', label: 'Equatorial Guinea (+240)' },
        { value: 'ER', label: 'Eritrea (+291)' },
        { value: 'EE', label: 'Estonia (+372)' },
        { value: 'ET', label: 'Ethiopia (+251)' },
        { value: 'FJ', label: 'Fiji (+679)' },
        { value: 'FI', label: 'Finland (+358)' },
        { value: 'GA', label: 'Gabon (+241)' },
        { value: 'GM', label: 'Gambia (+220)' },
        { value: 'GE', label: 'Georgia (+995)' },
        { value: 'GH', label: 'Ghana (+233)' },
        { value: 'GR', label: 'Greece (+30)' },
        { value: 'GD', label: 'Grenada (+1-473)' },
        { value: 'GT', label: 'Guatemala (+502)' },
        { value: 'GN', label: 'Guinea (+224)' },
        { value: 'GY', label: 'Guyana (+592)' },
        { value: 'HT', label: 'Haiti (+509)' },
        { value: 'HN', label: 'Honduras (+504)' },
        { value: 'HK', label: 'Hong Kong (+852)' },
        { value: 'HU', label: 'Hungary (+36)' },
        { value: 'IS', label: 'Iceland (+354)' },
        { value: 'ID', label: 'Indonesia (+62)' },
        { value: 'IR', label: 'Iran (+98)' },
        { value: 'IQ', label: 'Iraq (+964)' },
        { value: 'IE', label: 'Ireland (+353)' },
        { value: 'IL', label: 'Israel (+972)' },
        { value: 'IT', label: 'Italy (+39)' },
        { value: 'JM', label: 'Jamaica (+1-876)' },
        { value: 'JO', label: 'Jordan (+962)' },
        { value: 'KZ', label: 'Kazakhstan (+7)' },
        { value: 'KE', label: 'Kenya (+254)' },
        { value: 'KW', label: 'Kuwait (+965)' },
        { value: 'KG', label: 'Kyrgyzstan (+996)' },
        { value: 'LA', label: 'Laos (+856)' },
        { value: 'LV', label: 'Latvia (+371)' },
        { value: 'LB', label: 'Lebanon (+961)' },
        { value: 'LS', label: 'Lesotho (+266)' },
        { value: 'LR', label: 'Liberia (+231)' },
        { value: 'LY', label: 'Libya (+218)' },
        { value: 'LI', label: 'Liechtenstein (+423)' },
        { value: 'LT', label: 'Lithuania (+370)' },
        { value: 'LU', label: 'Luxembourg (+352)' },
        { value: 'MG', label: 'Madagascar (+261)' },
        { value: 'MW', label: 'Malawi (+265)' },
        { value: 'MY', label: 'Malaysia (+60)' },
        { value: 'MV', label: 'Maldives (+960)' },
        { value: 'ML', label: 'Mali (+223)' },
        { value: 'MT', label: 'Malta (+356)' },
        { value: 'MR', label: 'Mauritania (+222)' },
        { value: 'MU', label: 'Mauritius (+230)' },
        { value: 'MD', label: 'Moldova (+373)' },
        { value: 'MC', label: 'Monaco (+377)' },
        { value: 'MN', label: 'Mongolia (+976)' },
        { value: 'ME', label: 'Montenegro (+382)' },
        { value: 'MA', label: 'Morocco (+212)' },
        { value: 'MZ', label: 'Mozambique (+258)' },
        { value: 'MM', label: 'Myanmar (+95)' },
        { value: 'NA', label: 'Namibia (+264)' },
        { value: 'NP', label: 'Nepal (+977)' },
        { value: 'NL', label: 'Netherlands (+31)' },
        { value: 'NZ', label: 'New Zealand (+64)' },
        { value: 'NI', label: 'Nicaragua (+505)' },
        { value: 'NE', label: 'Niger (+227)' },
        { value: 'NG', label: 'Nigeria (+234)' },
        { value: 'KP', label: 'North Korea (+850)' },
        { value: 'MK', label: 'North Macedonia (+389)' },
        { value: 'NO', label: 'Norway (+47)' },
        { value: 'OM', label: 'Oman (+968)' },
        { value: 'PK', label: 'Pakistan (+92)' },
        { value: 'PA', label: 'Panama (+507)' },
        { value: 'PG', label: 'Papua New Guinea (+675)' },
        { value: 'PY', label: 'Paraguay (+595)' },
        { value: 'PE', label: 'Peru (+51)' },
        { value: 'PH', label: 'Philippines (+63)' },
        { value: 'PL', label: 'Poland (+48)' },
        { value: 'PT', label: 'Portugal (+351)' },
        { value: 'QA', label: 'Qatar (+974)' },
        { value: 'RO', label: 'Romania (+40)' },
        { value: 'RU', label: 'Russia (+7)' },
        { value: 'RW', label: 'Rwanda (+250)' },
        { value: 'SA', label: 'Saudi Arabia (+966)' },
        { value: 'SN', label: 'Senegal (+221)' },
        { value: 'RS', label: 'Serbia (+381)' },
        { value: 'SG', label: 'Singapore (+65)' },
        { value: 'SK', label: 'Slovakia (+421)' },
        { value: 'SI', label: 'Slovenia (+386)' },
        { value: 'SO', label: 'Somalia (+252)' },
        { value: 'ZA', label: 'South Africa (+27)' },
        { value: 'KR', label: 'South Korea (+82)' },
        { value: 'SS', label: 'South Sudan (+211)' },
        { value: 'ES', label: 'Spain (+34)' },
        { value: 'LK', label: 'Sri Lanka (+94)' },
        { value: 'SD', label: 'Sudan (+249)' },
        { value: 'SR', label: 'Suriname (+597)' },
        { value: 'SE', label: 'Sweden (+46)' },
        { value: 'CH', label: 'Switzerland (+41)' },
        { value: 'SY', label: 'Syria (+963)' },
        { value: 'TW', label: 'Taiwan (+886)' },
        { value: 'TJ', label: 'Tajikistan (+992)' },
        { value: 'TZ', label: 'Tanzania (+255)' },
        { value: 'TH', label: 'Thailand (+66)' },
        { value: 'TG', label: 'Togo (+228)' },
        { value: 'TT', label: 'Trinidad and Tobago (+1-868)' },
        { value: 'TN', label: 'Tunisia (+216)' },
        { value: 'TR', label: 'Turkey (+90)' },
        { value: 'TM', label: 'Turkmenistan (+993)' },
        { value: 'UG', label: 'Uganda (+256)' },
        { value: 'UA', label: 'Ukraine (+380)' },
        { value: 'AE', label: 'United Arab Emirates (+971)' },
        { value: 'UY', label: 'Uruguay (+598)' },
        { value: 'UZ', label: 'Uzbekistan (+998)' },
        { value: 'VE', label: 'Venezuela (+58)' },
        { value: 'VN', label: 'Vietnam (+84)' },
        { value: 'YE', label: 'Yemen (+967)' },
        { value: 'ZM', label: 'Zambia (+260)' },
        { value: 'ZW', label: 'Zimbabwe (+263)' }
      ],
      age_18: [
        { value: 'yes', label: 'Yes' },
        { value: 'no', label: 'No' }
      ],
      previous_employee: [
        { value: 'yes', label: 'Yes' },
        { value: 'no', label: 'No' }
      ],
      work_authorization: [
        { value: 'yes', label: 'Yes' },
        { value: 'no', label: 'No' }
      ],
      sponsorship: [
        { value: 'yes', label: 'Yes' },
        { value: 'no', label: 'No' }
      ],
      essential_functions: [
        { value: 'yes', label: 'Yes' },
        { value: 'no', label: 'No' }
      ]
    };

    const fetchOptions = (fieldName) => {
      return new Promise((resolve) => {
        setTimeout(() => {
          resolve(DROPDOWN_OPTIONS_API[fieldName] || []);
        }, 200);
      });
    };

    function GHSelect({ name, placeholder = 'Select...', required = false, onChange, error }) {
      const [isOpen, setIsOpen] = useState(false);
      const [options, setOptions] = useState([]);
      const [isLoading, setIsLoading] = useState(false);
      const [selectedOption, setSelectedOption] = useState(null);
      const [focusedIndex, setFocusedIndex] = useState(-1);
      const controlRef = useRef(null);
      const menuRef = useRef(null);

      useEffect(() => {
        if (isOpen && options.length === 0) {
          setIsLoading(true);
          fetchOptions(name).then((data) => {
            setOptions(data);
            setIsLoading(false);
          });
        }
      }, [isOpen, name, options.length]);

      const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0, width: 0 });

      useEffect(() => {
        if (isOpen && controlRef.current) {
          const rect = controlRef.current.getBoundingClientRect();
          setMenuPosition({
            top: rect.bottom + window.scrollY + 4,
            left: rect.left + window.scrollX,
            width: rect.width
          });
        }
      }, [isOpen]);

      useEffect(() => {
        const handleClickOutside = (e) => {
          if (
            controlRef.current && !controlRef.current.contains(e.target) &&
            menuRef.current && !menuRef.current.contains(e.target)
          ) {
            setIsOpen(false);
          }
        };
        if (isOpen) {
          document.addEventListener('mousedown', handleClickOutside);
          return () => document.removeEventListener('mousedown', handleClickOutside);
        }
      }, [isOpen]);

      useEffect(() => {
        const handleEscape = (e) => {
          if (e.key === 'Escape') setIsOpen(false);
        };
        document.addEventListener('keydown', handleEscape);
        return () => document.removeEventListener('keydown', handleEscape);
      }, []);

      const handleSelect = (option) => {
        setSelectedOption(option);
        setIsOpen(false);
        if (onChange) onChange(option.value);
      };

      const handleKeyDown = (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          if (!isOpen) {
            setIsOpen(true);
          } else if (focusedIndex >= 0 && options[focusedIndex]) {
            handleSelect(options[focusedIndex]);
          }
        } else if (e.key === 'ArrowDown') {
          e.preventDefault();
          if (!isOpen) {
            setIsOpen(true);
          } else {
            setFocusedIndex(prev => Math.min(prev + 1, options.length - 1));
          }
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          setFocusedIndex(prev => Math.max(prev - 1, 0));
        }
      };

      const menuPortal = isOpen ? createPortal(
        <div
          ref={menuRef}
          className="css-26l3qy-menu"
          style={{
            position: 'absolute',
            top: menuPosition.top,
            left: menuPosition.left,
            width: menuPosition.width
          }}
          data-testid={`menu-${name}`}
        >
          <div className="css-4ljt47-MenuList">
            {isLoading ? (
              <div className="css-loading-indicator">Loading...</div>
            ) : (
              options.map((option, index) => (
                <div
                  key={option.value}
                  className={`css-1n7v3ny-option${selectedOption?.value === option.value ? ' css-1n7v3ny-option--selected' : ''}${focusedIndex === index ? ' css-1n7v3ny-option--focused' : ''}`}
                  data-value={option.value}
                  data-testid={`option-${name}-${option.value}`}
                  onClick={() => handleSelect(option)}
                  onMouseEnter={() => setFocusedIndex(index)}
                >
                  {option.label}
                </div>
              ))
            )}
          </div>
        </div>,
        document.getElementById('select-portal-root')
      ) : null;

      return (
        <div className="css-2b097c-container" data-testid={`select-container-${name}`}>
          <input
            type="hidden"
            name={name}
            value={selectedOption?.value || ''}
            className="css-input-hidden"
            data-testid={`input-${name}`}
            required={required}
          />
          <div
            ref={controlRef}
            className={`css-yk16xz-control${isOpen ? ' css-yk16xz-control--focused' : ''}${error ? ' css-yk16xz-control--error' : ''}`}
            tabIndex={0}
            onClick={() => setIsOpen(!isOpen)}
            onKeyDown={handleKeyDown}
            data-testid={`control-${name}`}
          >
            {selectedOption ? (
              <span className="css-1uccc91-singleValue">{selectedOption.label}</span>
            ) : (
              <span className="css-1wa3eu0-placeholder">{placeholder}</span>
            )}
            <span className={`css-tlfecz-indicatorContainer${isOpen ? ' css-tlfecz-indicatorContainer--open' : ''}`}>
              <svg width="12" height="12" viewBox="0 0 12 12">
                <path fill="currentColor" d="M6 8L1 3h10z" />
              </svg>
            </span>
          </div>
          {menuPortal}
        </div>
      );
    }

    function ApplicationForm() {
      const [formData, setFormData] = useState({
        first_name: '', last_name: '', preferred_name: '', email: '', phone_country: '', phone: '',
        linkedin: '', website: '', desired_salary: '', age_18: '', previous_employee: '',
        work_authorization: '', sponsorship: '', essential_functions: '',
        why_strong_fit: '', additional_info: ''
      });
      const [errors, setErrors] = useState({});

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
        setErrors(prev => ({ ...prev, [name]: false }));
      };

      const handleSelectChange = (name) => (value) => {
        setFormData(prev => ({ ...prev, [name]: value }));
        setErrors(prev => ({ ...prev, [name]: false }));
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        const requiredFields = [
          'first_name', 'last_name', 'email', 'phone_country', 'phone',
          'desired_salary', 'age_18', 'previous_employee',
          'work_authorization', 'sponsorship', 'essential_functions'
        ];
        const newErrors = {};
        requiredFields.forEach(field => {
          if (!formData[field]) newErrors[field] = true;
        });
        if (Object.keys(newErrors).length > 0) {
          setErrors(newErrors);
          alert('Please fill in all required fields');
          return;
        }
        window.location.href = 'confirmation.html';
      };

      return (
        <div className="application-panel">
          <h2>Apply for this job</h2>
          <form onSubmit={handleSubmit}>
            <div className="form-group">
              <label htmlFor="first_name">First Name<span className="required">*</span></label>
              <input type="text" id="first_name" name="first_name" value={formData.first_name}
                onChange={handleInputChange} data-testid="input-first_name" />
            </div>
            <div className="form-group">
              <label htmlFor="last_name">Last Name<span className="required">*</span></label>
              <input type="text" id="last_name" name="last_name" value={formData.last_name}
                onChange={handleInputChange} data-testid="input-last_name" />
            </div>
            <div className="form-group">
              <label htmlFor="preferred_name">Preferred First Name</label>
              <input type="text" id="preferred_name" name="preferred_name" value={formData.preferred_name}
                onChange={handleInputChange} data-testid="input-preferred_name" />
            </div>
            <div className="form-group">
              <label htmlFor="email">Email<span className="required">*</span></label>
              <input type="email" id="email" name="email" value={formData.email}
                onChange={handleInputChange} data-testid="input-email" />
            </div>
            <div className="form-group">
              <label>Phone<span className="required">*</span></label>
              <div className="phone-group">
                <div className="country-select">
                  <GHSelect name="phone_country" placeholder="Country" required
                    onChange={handleSelectChange('phone_country')} error={errors.phone_country} />
                </div>
                <input type="tel" name="phone" placeholder="(555) 123-4567" value={formData.phone}
                  onChange={handleInputChange} data-testid="input-phone" />
              </div>
            </div>
            <div className="divider" />
            <div className="file-upload-group">
              <label>Resume/CV<span className="required">*</span></label>
              <div className="file-upload-options">
                <label className="file-upload-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48" />
                  </svg>
                  Attach
                  <input type="file" name="resume" accept=".pdf,.doc,.docx" data-testid="input-resume" />
                </label>
              </div>
              <p className="file-upload-help">Accepted: pdf, doc, docx</p>
            </div>
            <div className="file-upload-group">
              <label>Cover Letter</label>
              <div className="file-upload-options">
                <label className="file-upload-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48" />
                  </svg>
                  Attach
                  <input type="file" name="cover_letter" accept=".pdf,.doc,.docx" data-testid="input-cover_letter" />
                </label>
              </div>
            </div>
            <div className="divider" />
            <div className="form-group">
              <label htmlFor="linkedin">LinkedIn Profile</label>
              <input type="url" id="linkedin" name="linkedin" placeholder="https://linkedin.com/in/yourprofile"
                value={formData.linkedin} onChange={handleInputChange} data-testid="input-linkedin" />
            </div>
            <div className="form-group">
              <label htmlFor="website">Website</label>
              <input type="url" id="website" name="website" placeholder="https://yourwebsite.com"
                value={formData.website} onChange={handleInputChange} data-testid="input-website" />
            </div>
            <div className="divider" />
            <div className="section-header">Application Questions</div>
            <div className="form-group">
              <label>Are you at least 18 years of age?<span className="required">*</span></label>
              <GHSelect name="age_18" placeholder="Select..." required
                onChange={handleSelectChange('age_18')} error={errors.age_18} />
            </div>
            <div className="form-group">
              <label htmlFor="desired_salary">What is your desired salary?<span className="required">*</span></label>
              <input type="text" id="desired_salary" name="desired_salary" placeholder="e.g., $120,000"
                value={formData.desired_salary} onChange={handleInputChange} data-testid="input-desired_salary" />
            </div>
            <div className="form-group">
              <label>Have you ever been employed by IEM or IPS?<span className="required">*</span></label>
              <GHSelect name="previous_employee" placeholder="Select..." required
                onChange={handleSelectChange('previous_employee')} error={errors.previous_employee} />
            </div>
            <div className="form-group">
              <label>Are you legally authorized to work in the United States?<span className="required">*</span></label>
              <GHSelect name="work_authorization" placeholder="Select..." required
                onChange={handleSelectChange('work_authorization')} error={errors.work_authorization} />
            </div>
            <div className="form-group">
              <label>Do you require sponsorship now or in the future?<span className="required">*</span></label>
              <GHSelect name="sponsorship" placeholder="Select..." required
                onChange={handleSelectChange('sponsorship')} error={errors.sponsorship} />
            </div>
            <div className="form-group">
              <label>Can you perform the essential functions of this position?<span className="required">*</span></label>
              <GHSelect name="essential_functions" placeholder="Select..." required
                onChange={handleSelectChange('essential_functions')} error={errors.essential_functions} />
            </div>
            <div className="form-group">
              <label htmlFor="why_strong_fit">Why do you feel you are a strong fit?</label>
              <textarea id="why_strong_fit" name="why_strong_fit" placeholder="Share why you're interested..."
                value={formData.why_strong_fit} onChange={handleInputChange} data-testid="input-why_strong_fit" />
            </div>
            <div className="form-group">
              <label htmlFor="additional_info">Anything else to share?</label>
              <textarea id="additional_info" name="additional_info" placeholder="Additional information..."
                value={formData.additional_info} onChange={handleInputChange} data-testid="input-additional_info" />
            </div>
            <div className="divider" />
            <button type="submit" className="submit-btn" data-testid="submit-application">Submit application</button>
            <div className="powered-by">
              Powered by <span className="gh-logo">Greenhouse</span>
            </div>
          </form>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('application-root'));
    root.render(<ApplicationForm />);
  </script>
</body>

</html>
